# API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AliensAttack

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä API](#–æ–±–∑–æ—Ä-api)
- [–ü—Ä–∏–Ω—Ü–∏–ø—ã API](#–ø—Ä–∏–Ω—Ü–∏–ø—ã-api)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ API](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-api)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
- [–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ](#–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

## üîå –û–±–∑–æ—Ä API

API AliensAttack –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ç–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π. API –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

### üéØ –¶–µ–ª–∏ API

- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –Ω–∞–¥–µ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Public API                ‚îÇ ‚Üê –í–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ           Internal API              ‚îÇ ‚Üê –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ           Core API                  ‚îÇ ‚Üê –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üß© –ü—Ä–∏–Ω—Ü–∏–ø—ã API

### –ü—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–ö–∞–∂–¥—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ–±–ª–∞—Å—Ç—å:

```java
// –ë–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
public interface ICombatManager {
    CombatResult executeCombat(Unit attacker, Unit target);
}

// –°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏
public interface IVisibilitySystem {
    boolean hasLineOfSight(Position from, Position to);
}

// –°–∏—Å—Ç–µ–º–∞ –¥–µ–π—Å—Ç–≤–∏–π
public interface IActionManager {
    boolean canExecuteAction(Unit unit, ActionType action);
    void executeAction(Unit unit, ActionType action, Position target);
}
```

### –ü—Ä–∏–Ω—Ü–∏–ø –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏
API –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –Ω–æ –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```java
// –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
public interface ICombatManager {
    CombatResult executeCombat(Unit attacker, Unit target);
}

// –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
public interface IAdvancedCombatManager extends ICombatManager {
    CombatResult executeCombatWithCover(Unit attacker, Unit target, CoverType cover);
    CombatResult executeCombatWithTerrain(Unit attacker, Unit target, TerrainType terrain);
}
```

### –ü—Ä–∏–Ω—Ü–∏–ø –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –õ–∏—Å–∫–æ–≤
–í—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã:

```java
// –ë–∞–∑–æ–≤—ã–π —Ç–∏–ø
public interface ICombatManager {
    CombatResult executeCombat(Unit attacker, Unit target);
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã
public class BasicCombatManager implements ICombatManager { }
public class AdvancedCombatManager implements ICombatManager { }
public class XCOM2CombatManager implements ICombatManager { }
```

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
–ö–ª–∏–µ–Ω—Ç—ã –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–æ–¥–æ–≤:

```java
// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
public interface ICombatOperations {
    CombatResult executeCombat(Unit attacker, Unit target);
}

public interface IVisibilityOperations {
    boolean hasLineOfSight(Position from, Position to);
    Set<Position> getVisiblePositions(Position from);
}

public interface IActionOperations {
    boolean canExecuteAction(Unit unit, ActionType action);
    void executeAction(Unit unit, ActionType action, Position target);
}
```

### –ü—Ä–∏–Ω—Ü–∏–ø –∏–Ω–≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π, –∞ –Ω–µ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤:

```java
// –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
public class GameEngine {
    private final ICombatManager combatManager;
    private final IVisibilitySystem visibilitySystem;
    private final IActionManager actionManager;
    
    public GameEngine(ICombatManager combatManager, 
                     IVisibilitySystem visibilitySystem,
                     IActionManager actionManager) {
        this.combatManager = combatManager;
        this.visibilitySystem = visibilitySystem;
        this.actionManager = actionManager;
    }
}
```

## üè¢ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –ü–∞–∫–µ—Ç—ã API

#### Core API (`com.aliensattack.core`)
- **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** - –±–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- **–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è** - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Ç–∏–ø—ã
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã

#### Combat API (`com.aliensattack.combat`)
- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–æ—è** - ICombatManager
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–æ—è** - CombatResult
- **–°–∏—Å—Ç–µ–º—ã —Å—Ç—Ä–µ–ª—å–±—ã** - ShootingSystem
- **–§–∞–±—Ä–∏–∫–∏ –æ—Ä—É–∂–∏—è** - WeaponFactory

#### Field API (`com.aliensattack.field`)
- **–¢–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª–µ** - ITacticalField
- **–ö–ª–µ—Ç–∫–∏ –ø–æ–ª—è** - Tile
- **–ü–æ–∑–∏—Ü–∏–∏** - Position
- **–°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏** - IVisibilitySystem

#### Action API (`com.aliensattack.actions`)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏** - IActionManager
- **–¢–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π** - ActionType
- **–î–µ–π—Å—Ç–≤–∏—è —é–Ω–∏—Ç–æ–≤** - UnitAction
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π** - ActionValidator

#### Visualization API (`com.aliensattack.visualization`)
- **3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - Combat3DVisualizer
- **–†–µ–Ω–¥–µ—Ä–∏–Ω–≥** - Renderer
- **–ö–∞–º–µ—Ä–∞** - Camera
- **–≠—Ñ—Ñ–µ–∫—Ç—ã** - VisualEffect

#### UI API (`com.aliensattack.ui`)
- **–ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ** - GameWindow
- **–ü–∞–Ω–µ–ª–∏** - ActionPanel, InfoPanel
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** - UIController
- **–°–æ–±—ã—Ç–∏—è UI** - UIEvent

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```
ICombatManager
‚îú‚îÄ‚îÄ BasicCombatManager
‚îú‚îÄ‚îÄ AdvancedCombatManager
‚îî‚îÄ‚îÄ XCOM2CombatManager

IVisibilitySystem
‚îú‚îÄ‚îÄ BasicVisibilitySystem
‚îî‚îÄ‚îÄ AdvancedVisibilitySystem

IActionManager
‚îú‚îÄ‚îÄ BasicActionManager
‚îî‚îÄ‚îÄ AdvancedActionManager

ITacticalField
‚îú‚îÄ‚îÄ BasicTacticalField
‚îî‚îÄ‚îÄ OptimizedTacticalField
```

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

### ICombatManager
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ–µ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏

```java
public interface ICombatManager {
    /**
     * –í—ã–ø–æ–ª–Ω—è–µ—Ç –±–æ–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —é–Ω–∏—Ç–∞–º–∏
     * @param attacker –∞—Ç–∞–∫—É—é—â–∏–π —é–Ω–∏—Ç
     * @param target —Ü–µ–ª—å –∞—Ç–∞–∫–∏
     * @return —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ–µ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
     * @throws CombatException –µ—Å–ª–∏ –±–æ–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
     */
    CombatResult executeCombat(Unit attacker, Unit target) throws CombatException;
    
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏
     * @param attacker –∞—Ç–∞–∫—É—é—â–∏–π —é–Ω–∏—Ç
     * @param target —Ü–µ–ª—å –∞—Ç–∞–∫–∏
     * @return true –µ—Å–ª–∏ –∞—Ç–∞–∫–∞ –≤–æ–∑–º–æ–∂–Ω–∞
     */
    boolean canAttack(Unit attacker, Unit target);
    
    /**
     * –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —É—Ä–æ–Ω –∞—Ç–∞–∫–∏
     * @param attacker –∞—Ç–∞–∫—É—é—â–∏–π —é–Ω–∏—Ç
     * @param target —Ü–µ–ª—å –∞—Ç–∞–∫–∏
     * @return —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π —É—Ä–æ–Ω
     */
    int calculateDamage(Unit attacker, Unit target);
}
```

### IVisibilitySystem
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏

```java
public interface IVisibilitySystem {
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–∏–Ω–∏—é –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–∑–∏—Ü–∏—è–º–∏
     * @param from –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
     * @param to –∫–æ–Ω–µ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
     * @return true –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä—è–º–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å
     */
    boolean hasLineOfSight(Position from, Position to);
    
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –≤–∏–¥–∏–º—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–∫–∏
     * @param from –ø–æ–∑–∏—Ü–∏—è –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
     * @return –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∏–¥–∏–º—ã—Ö –ø–æ–∑–∏—Ü–∏–π
     */
    Set<Position> getVisiblePositions(Position from);
    
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å —é–Ω–∏—Ç–∞
     * @param observer –Ω–∞–±–ª—é–¥–∞—é—â–∏–π —é–Ω–∏—Ç
     * @param target —Ü–µ–ª–µ–≤–æ–π —é–Ω–∏—Ç
     * @return true –µ—Å–ª–∏ —Ü–µ–ª—å –≤–∏–¥–Ω–∞
     */
    boolean canSeeUnit(Unit observer, Unit target);
}
```

### IActionManager
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ —é–Ω–∏—Ç–æ–≤

```java
public interface IActionManager {
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è
     * @param unit —é–Ω–∏—Ç
     * @param action —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
     * @return true –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
     */
    boolean canExecuteAction(Unit unit, ActionType action);
    
    /**
     * –í—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ —é–Ω–∏—Ç–∞
     * @param unit —é–Ω–∏—Ç
     * @param action —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
     * @param target —Ü–µ–ª–µ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è
     * @throws ActionException –µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
     */
    void executeAction(Unit unit, ActionType action, Position target) throws ActionException;
    
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —é–Ω–∏—Ç–∞
     * @param unit —é–Ω–∏—Ç
     * @return —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
     */
    List<ActionType> getAvailableActions(Unit unit);
    
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –≤ –æ—á–∫–∞—Ö –¥–µ–π—Å—Ç–≤–∏–π
     * @param action —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
     * @return —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ AP
     */
    int getActionCost(ActionType action);
}
```

### ITacticalField
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–ª–µ–º

```java
public interface ITacticalField {
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç –∫–ª–µ—Ç–∫—É –ø–æ –ø–æ–∑–∏—Ü–∏–∏
     * @param position –ø–æ–∑–∏—Ü–∏—è
     * @return –∫–ª–µ—Ç–∫–∞ –ø–æ–ª—è
     * @throws FieldException –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞
     */
    Tile getTile(Position position) throws FieldException;
    
    /**
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏
     * @param position –ø–æ–∑–∏—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
     * @return true –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
     */
    boolean isValidPosition(Position position);
    
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è
     * @return —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è (—à–∏—Ä–∏–Ω–∞ x –≤—ã—Å–æ—Ç–∞)
     */
    Dimension getSize();
    
    /**
     * –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—è
     * @param position –ø–æ–∑–∏—Ü–∏—è
     * @param tile –Ω–æ–≤–∞—è –∫–ª–µ—Ç–∫–∞
     */
    void updateTile(Position position, Tile tile);
}
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```java
// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –±–æ—è
ICombatManager combatManager = new BasicCombatManager();

// –°–æ–∑–¥–∞–Ω–∏–µ —é–Ω–∏—Ç–æ–≤
Unit soldier = new Unit(UnitType.SOLDIER, new Position(5, 5));
Unit alien = new Unit(UnitType.ALIEN, new Position(6, 6));

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ç–∞–∫–∏
try {
    CombatResult result = combatManager.executeCombat(soldier, alien);
    System.out.println("–ê—Ç–∞–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞: " + result.isHit());
    System.out.println("–£—Ä–æ–Ω: " + result.getDamage());
} catch (CombatException e) {
    System.err.println("–û—à–∏–±–∫–∞ –±–æ—è: " + e.getMessage());
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤–∏–¥–∏–º–æ—Å—Ç–∏

```java
// –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –≤–∏–¥–∏–º–æ—Å—Ç–∏
IVisibilitySystem visibilitySystem = new BasicVisibilitySystem();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
Position observer = new Position(3, 3);
Position target = new Position(7, 7);

boolean canSee = visibilitySystem.hasLineOfSight(observer, target);
System.out.println("–í–∏–¥–∏–º–æ—Å—Ç—å: " + canSee);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–∏–¥–∏–º—ã—Ö –ø–æ–∑–∏—Ü–∏–π
Set<Position> visiblePositions = visibilitySystem.getVisiblePositions(observer);
System.out.println("–í–∏–¥–∏–º—ã—Ö –ø–æ–∑–∏—Ü–∏–π: " + visiblePositions.size());
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```java
// –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏–π
IActionManager actionManager = new BasicActionManager();

// –°–æ–∑–¥–∞–Ω–∏–µ —é–Ω–∏—Ç–∞
Unit unit = new Unit(UnitType.SOLDIER, new Position(5, 5));
unit.setActionPoints(2);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
List<ActionType> availableActions = actionManager.getAvailableActions(unit);
System.out.println("–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è: " + availableActions);

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
try {
    actionManager.executeAction(unit, ActionType.MOVEMENT, new Position(6, 5));
    System.out.println("–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ");
} catch (ActionException e) {
    System.err.println("–û—à–∏–±–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è: " + e.getMessage());
}
```

### –†–∞–±–æ—Ç–∞ —Å —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–ª–µ–º

```java
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—è
ITacticalField field = new BasicTacticalField(64, 64);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª–µ—Ç–∫–∏
Position pos = new Position(10, 10);
Tile tile = field.getTile(pos);
System.out.println("–¢–∏–ø –º–µ—Å—Ç–Ω–æ—Å—Ç–∏: " + tile.getTerrainType());

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏
boolean isValid = field.isValidPosition(new Position(100, 100));
System.out.println("–ü–æ–∑–∏—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞: " + isValid);

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–µ—Ç–∫–∏
Tile newTile = new Tile(pos, TerrainType.URBAN, CoverType.FULL);
field.updateTile(pos, newTile);
```

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ò–µ—Ä–∞—Ä—Ö–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```java
// –ë–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
public abstract class GameException extends Exception {
    private final ErrorType errorType;
    
    public GameException(String message, ErrorType errorType) {
        super(message);
        this.errorType = errorType;
    }
}

// –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
public class CombatException extends GameException {
    public CombatException(String message) {
        super(message, ErrorType.COMBAT_ERROR);
    }
}

public class ActionException extends GameException {
    public ActionException(String message) {
        super(message, ErrorType.ACTION_ERROR);
    }
}

public class FieldException extends GameException {
    public FieldException(String message) {
        super(message, ErrorType.FIELD_ERROR);
    }
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```java
// –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
try {
    CombatResult result = combatManager.executeCombat(attacker, target);
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
} catch (CombatException e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ –±–æ—è
    logger.error("–û—à–∏–±–∫–∞ –±–æ—è: {}", e.getMessage());
    showErrorMessage("–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∞—Ç–∞–∫—É");
} catch (GameException e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–∏—Ö –∏–≥—Ä–æ–≤—ã—Ö –æ—à–∏–±–æ–∫
    logger.error("–ò–≥—Ä–æ–≤–∞—è –æ—à–∏–±–∫–∞: {}", e.getMessage());
    showErrorMessage("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –≤ –∏–≥—Ä–µ");
} catch (Exception e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
    logger.error("–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {}", e.getMessage());
    showErrorMessage("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞");
}
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```java
// –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏
public class InputValidator {
    public static void validatePosition(Position position, ITacticalField field) 
            throws FieldException {
        if (position == null) {
            throw new FieldException("–ü–æ–∑–∏—Ü–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null");
        }
        
        if (!field.isValidPosition(position)) {
            throw new FieldException("–ü–æ–∑–∏—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω–µ –ø–æ–ª—è");
        }
    }
    
    public static void validateUnit(Unit unit) throws GameException {
        if (unit == null) {
            throw new GameException("–Æ–Ω–∏—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null", ErrorType.UNIT_ERROR);
        }
        
        if (unit.getHealth() <= 0) {
            throw new GameException("–Æ–Ω–∏—Ç –º–µ—Ä—Ç–≤", ErrorType.UNIT_ERROR);
        }
    }
}
```

## üîÑ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (SemVer):

- **MAJOR.MINOR.PATCH**
- **MAJOR** - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- **MINOR** - –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- **PATCH** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### –ü—Ä–∏–º–µ—Ä—ã –≤–µ—Ä—Å–∏–π

```
1.0.0 - –ü–µ—Ä–≤–∞—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
1.1.0 - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π
1.1.1 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á–µ—Ç–µ —É—Ä–æ–Ω–∞
2.0.0 - –ò–∑–º–µ–Ω–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ICombatManager
```

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

```java
// –°—Ç–∞—Ä—ã–π API (v1.0.0)
public interface ICombatManager {
    CombatResult executeCombat(Unit attacker, Unit target);
}

// –ù–æ–≤—ã–π API (v1.1.0) - –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
public interface ICombatManager {
    CombatResult executeCombat(Unit attacker, Unit target);
    CombatResult executeCombatWithCover(Unit attacker, Unit target, CoverType cover);
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è API

```java
// –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏ —Å v1.0.0 –Ω–∞ v2.0.0
public class ApiMigration {
    public static ICombatManager migrateCombatManager(ICombatManager oldManager) {
        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
        return new V2CombatManager(oldManager);
    }
}
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### Javadoc

–í—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã API –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å –ø–æ–º–æ—â—å—é Javadoc:

```java
/**
 * –í—ã–ø–æ–ª–Ω—è–µ—Ç –±–æ–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –¥–≤—É–º—è —é–Ω–∏—Ç–∞–º–∏.
 * 
 * @param attacker –∞—Ç–∞–∫—É—é—â–∏–π —é–Ω–∏—Ç, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null
 * @param target —Ü–µ–ª—å –∞—Ç–∞–∫–∏, –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null
 * @return —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ–µ–≤–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
 * @throws CombatException –µ—Å–ª–∏ –±–æ–µ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
 * @throws IllegalArgumentException –µ—Å–ª–∏ attacker –∏–ª–∏ target —Ä–∞–≤–Ω—ã null
 * 
 * @since 1.0.0
 * @see CombatResult
 * @see Unit
 */
CombatResult executeCombat(Unit attacker, Unit target) throws CombatException;
```

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

–ö–∞–∂–¥—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å API —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```java
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ICombatManager
public class CombatExample {
    public static void main(String[] args) {
        ICombatManager combatManager = new BasicCombatManager();
        
        // –°–æ–∑–¥–∞–Ω–∏–µ —é–Ω–∏—Ç–æ–≤
        Unit soldier = new Unit(UnitType.SOLDIER, new Position(5, 5));
        Unit alien = new Unit(UnitType.ALIEN, new Position(6, 6));
        
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ç–∞–∫–∏
        try {
            CombatResult result = combatManager.executeCombat(soldier, alien);
            System.out.println("–†–µ–∑—É–ª—å—Ç–∞—Ç –∞—Ç–∞–∫–∏: " + result);
        } catch (CombatException e) {
            System.err.println("–û—à–∏–±–∫–∞: " + e.getMessage());
        }
    }
}
```

### –¢–µ—Å—Ç—ã API

–í—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã API –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏:

```java
@Test
public void testCombatManagerExecuteCombat() {
    ICombatManager combatManager = new BasicCombatManager();
    Unit attacker = new Unit(UnitType.SOLDIER, new Position(5, 5));
    Unit target = new Unit(UnitType.ALIEN, new Position(6, 6));
    
    CombatResult result = combatManager.executeCombat(attacker, target);
    
    assertNotNull(result);
    assertTrue(result.getDamage() >= 0);
}
```
