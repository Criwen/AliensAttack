# Система Подготовки к Миссии

## Обзор

Система подготовки к миссии в AliensAttack позволяет игрокам экипировать солдат перед началом тактического боя. Это важный этап, который определяет эффективность солдат в бою.

## Интеграция в Основную Игру

### Панель Управления Миссией

В основной игре добавлена новая панель **"Управление Миссией"**, которая содержит:

- **Кнопка "Подготовка к миссии"** - открывает форму выбора солдат и снаряжения
- **Кнопка "Начать бой"** - активируется только после подготовки солдат
- **Кнопка "Сбросить подготовку"** - позволяет переподготовить солдат
- **Статус миссии** - показывает текущее состояние подготовки

### Расположение в Интерфейсе

Панель управления миссией расположена в правой части экрана, под панелью действий, рядом с панелями механик и стрельбы.

## Процесс Подготовки к Миссии

### 1. Начальное Состояние
- Игра запускается в состоянии "Требуется подготовка"
- Кнопка "Начать бой" неактивна
- Кнопка "Сбросить подготовку" неактивна

### 2. Открытие Формы Подготовки
- Нажмите кнопку **"Подготовка к миссии"**
- Откроется модальное окно с формой выбора солдат и снаряжения
- Форма содержит все необходимые элементы для экипировки

### 3. Выбор и Экипировка Солдат
- **Выберите солдата** из списка доступных
- **Выберите оружие** (обязательно)
- **Выберите броню** (обязательно)
- **Выберите взрывчатку** (опционально)
- Нажмите **"Подтвердить выбор"**

### 4. Активация Боевого Режима
- После успешной подготовки кнопка **"Начать бой"** становится активной
- Статус меняется на **"Готов к бою"** (зеленый цвет)
- Можно начинать тактический бой

### 5. Начало Боя
- Нажмите кнопку **"Начать бой"**
- Статус меняется на **"Бой в процессе"** (оранжевый цвет)
- Фокус автоматически переключается на тактическую карту
- Бой начинается с подготовленными солдатами

## Возможности Системы

### Переподготовка Солдат
- В любой момент можно нажать **"Сбросить подготовку"**
- Все солдаты возвращаются в исходное состояние
- Требуется повторная подготовка
- Кнопка "Начать бой" снова становится неактивной

### Интеграция с Боевой Системой
- Подготовленные солдаты сохраняют свою экипировку
- Оружие, броня и взрывчатка влияют на боевые характеристики
- Система учитывает класс солдата и совместимость снаряжения

## Техническая Реализация

### Архитектура
- **SoldierSelectionFormSimple** - основная форма выбора (без Lombok)
- **GameWindow** - интеграция с главным окном игры
- **MissionControlPanel** - панель управления миссией
- **Dialog System** - модальные окна для форм

### Ключевые Методы
- `openSoldierSelectionForm()` - открытие формы подготовки
- `enableBattleStart()` - активация кнопки начала боя
- `startBattle()` - начало боевого режима
- `resetPreparation()` - сброс подготовки

### Управление Состоянием
- Использование `ClientProperty` для хранения ссылок на UI элементы
- Динамическое обновление состояния кнопок
- Цветовая индикация статуса миссии

## Использование

### Запуск Подготовки
1. Запустите игру
2. В правой панели найдите **"Управление Миссией"**
3. Нажмите **"Подготовка к миссии"**

### Экипировка Солдата
1. Выберите солдата из списка слева
2. Просмотрите его характеристики и способности
3. Выберите оружие в центральной панели
4. Выберите броню
5. При необходимости выберите взрывчатку
6. Нажмите **"Подтвердить выбор"**

### Начало Боя
1. Убедитесь, что статус показывает **"Готов к бою"**
2. Нажмите **"Начать бой"**
3. Приступайте к тактическому бою

## Преимущества Системы

### Тактическая Глубина
- Игроки должны продумывать экипировку для каждой миссии
- Разные классы солдат требуют разного снаряжения
- Взрывчатка добавляет тактические возможности

### Иммерсивность
- Реалистичный процесс подготовки к миссии
- Четкое разделение между подготовкой и боем
- Визуальная обратная связь о состоянии миссии

### Гибкость
- Возможность переподготовки в любой момент
- Множество вариантов экипировки
- Адаптация под стиль игры игрока

## Будущие Улучшения

### Планируемые Функции
- **Сохранение конфигураций** - загрузка сохраненных наборов снаряжения
- **Валидация совместимости** - проверка совместимости оружия и брони
- **Система веса** - ограничения по весу снаряжения
- **Специализация** - бонусы за правильную экипировку класса

### Интеграция с Другими Системами
- **Экономика** - стоимость снаряжения
- **Исследования** - новые типы оружия и брони
- **Прогресс** - улучшение снаряжения с опытом
- **Миссии** - специальные требования к снаряжению

---

Эта система создает важный этап подготовки перед каждым боем, добавляя глубину и стратегическое планирование в игровой процесс AliensAttack.
